//ğŸ§©Don't Edit this file.âœ¨Generated in Thu Feb 08 2024 15:31:51 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)âœ¨

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Tag {
  tagID                 String               @id @default(auto()) @map("_id") @db.ObjectId
  createdAt             DateTime             @default(now())
  updatedAt             DateTime             @updatedAt
  /// æ ‡ç­¾å
  tagName               String               @unique
  /// æ ‡ç­¾æè¿°
  tagDescription        String?
  /// æ ‡ç­¾æµè§ˆé‡
  tagViewCount          Int                  @default(0)
  /// é“¾æ¥çš„è„šæœ¬
  browserScriptStore    BrowserScriptStore[] @relation(fields: [browserScriptStoreIDs], references: [browserScriptStoreID])
  /// é“¾æ¥çš„è„šæœ¬ID
  browserScriptStoreIDs String[]             @db.ObjectId
}

/// é—ªç”µï¼šç”¨æˆ·App Storeè®¢é˜…
model UserAppStoreSubscribe {
  userAppStoreSubscribeID String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt               DateTime @default(now())
  updatedAt               DateTime @updatedAt
  /// åŸå§‹äº¤æ˜“ID
  originalTransactionID   String

  user   User   @relation(fields: [userID], references: [userID])
  userID String @db.ObjectId
}

/// é—ªç”µï¼šæµè§ˆå™¨ä¹¦ç­¾
model BrowserBookMark {
  browserBookMarkID String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  /// æ ‡é¢˜
  bookMarkTitle     String
  /// é“¾æ¥
  bookMarkLink      String
  /// å›¾æ ‡
  bookMarkIcon      String
  /// é¢œè‰²
  bookMarkColor     String
  /// ç´¢å¼•
  bookMarkIndex     Int
  /// ç”¨æˆ·
  user              User     @relation(fields: [userID], references: [userID])
  /// ç”¨æˆ·ID
  userID            String   @db.ObjectId
}

/// é—ªç”µï¼šæµè§ˆå™¨è„šæœ¬
model BrowserScript {
  browserScriptID String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  /// è„šæœ¬
  scriptContent   String
  /// è„šæœ¬è§£æåçš„å†…å®¹
  scriptInfo      String
  /// ä¸Šä¼ çš„ç”¨æˆ·
  user            User     @relation(fields: [userID], references: [userID])
  /// ä¸Šä¼ çš„ç”¨æˆ·ID
  userID          String   @db.ObjectId
}

/// é—ªç”µï¼šæµè§ˆå™¨è„šæœ¬åº“
model BrowserScriptStore {
  browserScriptStoreID String       @id @default(auto()) @map("_id") @db.ObjectId
  createdAt            DateTime     @default(now())
  updatedAt            DateTime     @updatedAt
  /// è„šæœ¬
  scriptContent        String
  /// è„šæœ¬è§£æåçš„å†…å®¹
  scriptInfo           String
  /// æµè§ˆé‡
  viewCount            Int
  scriptStatus         ScriptStatus
  /// ä¸Šä¼ è€…
  uploader             User         @relation(fields: [uploaderUserID], references: [userID])
  /// ä¸Šä¼ è€…ID
  uploaderUserID       String       @db.ObjectId
  /// æ ‡ç­¾
  tags                 Tag[]        @relation(fields: [tagIDs], references: [tagID])
  tagIDs               String[]     @db.ObjectId
}

/// é—ªç”µï¼šæµè§ˆå™¨è¶³è¿¹
model BrowserTrack {
  browserTrackID String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  /// æ ‡é¢˜
  webPageTitle   String
  /// é“¾æ¥
  webPageLink    String
  /// ç”¨æˆ·
  user           User     @relation(fields: [userID], references: [userID])
  /// ç”¨æˆ·ID
  userID         String   @db.ObjectId
}

/// ç”¨æˆ·ç™»å½•æ ‡è¯†ç¬¦
model UserIdentifier {
  userIdentifierID String       @id @default(auto()) @map("_id") @db.ObjectId
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  /// ç™»å½•è®¾å¤‡ç±»å‹
  loginType        ILoginType
  /// ç™»å½•çš„å®¢æˆ·ç«¯ æ˜¯å“ªä¸ªAPP
  loginClient      String?
  /// ç™»å½•çš„è®¾å¤‡å
  loginDeviceName  String?
  /// ç™»å½•çš„IP
  loginIP          String?
  /// ç™»å½•çš„æ¸ é“
  loginMethod      ILoginMethod
  /// ç™»å½•çš„æ ‡è¯†ç¬¦
  identifier       String?
  /// ç™»å½•çš„ç”¨æˆ·
  user             User         @relation(fields: [userID], references: [userID])
  /// ç™»å½•çš„ç”¨æˆ·ID
  userID           String       @db.ObjectId
}

/// æƒé™åº“
model Permission {
  permissionID          String           @id @default(auto()) @map("_id") @db.ObjectId
  createdAt             DateTime         @default(now())
  updatedAt             DateTime         @updatedAt
  /// æƒé™çš„åç§°
  permissionName        String           @unique
  /// æƒé™çš„æè¿°
  permissionDescription String?
  RolePermission        RolePermission[]
}

/// è§’è‰²
model Role {
  roleID          String           @id @default(auto()) @map("_id") @db.ObjectId
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  /// è§’è‰²çš„åç§°
  roleName        String           @unique
  /// è§’è‰²çš„æè¿°
  roleDescription String?
  /// è§’è‰²çš„æƒé™
  RolePermission  RolePermission[]
  /// è§’è‰²çš„ç”¨æˆ·
  User            User?            @relation(fields: [userID], references: [userID])
  /// è§’è‰²çš„ç”¨æˆ·ID
  userID          String?          @db.ObjectId
}

/// è§’è‰²æ‹¥æœ‰çš„æƒé™åˆ—è¡¨
model RolePermission {
  rolePermissionID String     @id @default(auto()) @map("_id") @db.ObjectId
  createdAt        DateTime   @default(now())
  updatedAt        DateTime   @updatedAt
  /// è§’è‰²
  role             Role       @relation(fields: [roleID], references: [roleID])
  roleID           String     @db.ObjectId
  /// æƒé™
  permission       Permission @relation(fields: [permissionID], references: [permissionID])
  permissionID     String     @db.ObjectId
}

/// ç”¨æˆ·
model User {
  userID                String                  @id @default(auto()) @map("_id") @db.ObjectId
  createdAt             DateTime                @default(now())
  updatedAt             DateTime                @updatedAt
  /// ç”¨æˆ·çš„ç”¨æˆ·å
  username              String                  @unique
  /// ç”¨æˆ·çš„å¯†ç 
  password              String?
  /// ç”¨æˆ·çš„ip
  ip                    String?
  /// ç”¨æˆ·çš„æ˜µç§°
  saying                String?
  /// ç”¨æˆ·çš„å¤´åƒ
  avatar                String?
  /// ç”¨æˆ·çš„é‚®ç®±
  email                 String?
  /// ç”¨æˆ·çš„æ‰‹æœºå·
  phone                 String?
  /// ç”¨æˆ·æ˜¯å¦è¢«åˆ é™¤
  isDeleted             Boolean?                @default(false)
  /// ç”¨æˆ·çš„ç™»å½•æ ‡è¯†ç¬¦
  identifiers           UserIdentifier[]
  /// ç”¨æˆ·çš„æµè§ˆå™¨ä¹¦ç­¾
  BrowserBookMark       BrowserBookMark[]
  /// ç”¨æˆ·çš„æµè§ˆå™¨è¶³è¿¹
  BrowserTrack          BrowserTrack[]
  /// ç”¨æˆ·çš„App Storeè®¢é˜…
  UserAppStoreSubscribe UserAppStoreSubscribe[]
  /// ç”¨æˆ·çš„è§’è‰²
  roles                 Role[]
  /// ç”¨æˆ·çš„æµè§ˆå™¨è„šæœ¬
  BrowserScript         BrowserScript[]
  /// ç”¨æˆ·åœ¨å•†åº—åˆ›å»ºçš„æµè§ˆå™¨è„šæœ¬
  BrowserScriptStore    BrowserScriptStore[]
}

enum ScriptStatus {
  Pending
  Draft
  Published
}

/// ç™»å½•è®¾å¤‡ç±»å‹
enum ILoginType {
  WatchOS
  HarmonyOS_Wearable
  Android
  Web
  IOS
}

/// ç™»å½•æ–¹å¼
enum ILoginMethod {
  QrCode
  PhoneCode
  EmailCode
  UsernamePassword
}
