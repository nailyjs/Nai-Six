{"code":"(()=>{\nvar __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var checkEnv_exports={};__export(checkEnv_exports,{getEnvTasks:()=>getEnvTasks});module.exports=__toCommonJS(checkEnv_exports);var import_child_process=require(\"child_process\");function checkPnpm(){try{(0,import_child_process.execSync)(\"pnpm -v\",{stdio:\"ignore\"});return true}catch(error){return false}}__name(checkPnpm,\"checkPnpm\");function checkShared(){try{require(\"cc.naily.element.shared\");return true}catch(error){return false}}__name(checkShared,\"checkShared\");function getEnvTasks(){return[{title:\"Check pnpm\",task(ctx,renderer){return new Promise(resolve=>{if(checkPnpm())return resolve(true);renderer.title=\"pnpm is not installed, try to install...\";try{const worker=(0,import_child_process.exec)(\"npm i -g pnpm\");worker.on(\"data\",function(data){renderer.title=data});worker.stderr.on(\"data\",function(data){renderer.title=data});worker.on(\"close\",function(){renderer.title=\"pnpm installed\";return resolve(true)})}catch(error){renderer.title=\"pnpm install failed, please install pnpm manually.\";process.exit()}})}},{title:\"Check shared package\",task(ctx,renderer){return new Promise(resolve=>{if(checkShared())return resolve(true);renderer.title=\"cc.naily.element.shared is not built. Try to build...\";try{const worker=(0,import_child_process.exec)(\"pnpm run build:shared\");worker.on(\"data\",function(data){renderer.title=data});worker.stderr.on(\"data\",function(data){renderer.title=data});worker.on(\"close\",function(){renderer.title=\"cc.naily.element.shared built\";resolve(true)})}catch(error){renderer.title=\"cc.naily.element.shared build failed. Try to install...\";try{const worker=(0,import_child_process.exec)(\"pnpm install\");worker.on(\"data\",function(data){renderer.title=data});worker.stderr.on(\"data\",function(data){renderer.title=data});worker.on(\"close\",function(){renderer.title=\"cc.naily.element.shared installed\";resolve(true)})}catch(error2){renderer.title=\"cc.naily.element.shared install failed. Please install cc.naily.element.shared manually.\";process.exit()}}})}}]}__name(getEnvTasks,\"getEnvTasks\");\n})()\n","warnings":[],"map":{"version":3,"mappings":";suBAAA,+HAiBA,yBAA+B,yBAG/B,SAAS,WAAY,CACnB,GAAI,IACF,+BAAS,UAAW,CAAE,MAAO,QAAS,CAAC,EACvC,MAAO,KACT,OAAS,MAAO,CACd,MAAO,MACT,CACF,CAPS,8BAST,SAAS,aAAc,CACrB,GAAI,CACF,QAAQ,yBAAyB,EACjC,MAAO,KACT,OAAS,MAAO,CACd,MAAO,MACT,CACF,CAPS,kCASF,SAAS,aAA2B,CACzC,MAAO,CACL,CACE,MAAO,aACP,KAAK,IAAK,SAAU,CAClB,OAAO,IAAI,QAAS,SAAY,CAC9B,GAAI,UAAU,EAAG,OAAO,QAAQ,IAAI,EACpC,SAAS,MAAQ,2CACjB,GAAI,CACF,MAAM,UAAS,2BAAK,eAAe,EAEnC,OAAO,GAAG,OAAQ,SAAU,KAAM,CAChC,SAAS,MAAQ,IACnB,CAAC,EACD,OAAO,OAAO,GAAG,OAAQ,SAAU,KAAM,CACvC,SAAS,MAAQ,IACnB,CAAC,EACD,OAAO,GAAG,QAAS,UAAY,CAC7B,SAAS,MAAQ,iBACjB,OAAO,QAAQ,IAAI,CACrB,CAAC,CACH,OAAS,MAAO,CACd,SAAS,MAAQ,qDACjB,QAAQ,KAAK,CACf,CACF,CAAC,CACH,CACF,EACA,CACE,MAAO,uBACP,KAAK,IAAK,SAAU,CAClB,OAAO,IAAI,QAAS,SAAY,CAC9B,GAAI,YAAY,EAAG,OAAO,QAAQ,IAAI,EACtC,SAAS,MAAQ,wDACjB,GAAI,CACF,MAAM,UAAS,2BAAK,uBAAuB,EAE3C,OAAO,GAAG,OAAQ,SAAU,KAAM,CAChC,SAAS,MAAQ,IACnB,CAAC,EACD,OAAO,OAAO,GAAG,OAAQ,SAAU,KAAM,CACvC,SAAS,MAAQ,IACnB,CAAC,EACD,OAAO,GAAG,QAAS,UAAY,CAC7B,SAAS,MAAQ,gCACjB,QAAQ,IAAI,CACd,CAAC,CACH,OAAS,MAAO,CACd,SAAS,MAAQ,0DACjB,GAAI,CACF,MAAM,UAAS,2BAAK,cAAc,EAElC,OAAO,GAAG,OAAQ,SAAU,KAAM,CAChC,SAAS,MAAQ,IACnB,CAAC,EACD,OAAO,OAAO,GAAG,OAAQ,SAAU,KAAM,CACvC,SAAS,MAAQ,IACnB,CAAC,EACD,OAAO,GAAG,QAAS,UAAY,CAC7B,SAAS,MAAQ,oCACjB,QAAQ,IAAI,CACd,CAAC,CACH,OAASA,OAAO,CACd,SAAS,MAAQ,2FACjB,QAAQ,KAAK,CACf,CACF,CACF,CAAC,CACH,CACF,CACF,CACF,CAvEgB","names":["error"],"sources":["/www/wwwroot/Nai-Six/scripts/checkEnv.ts"],"sourcesContent":[null]}}