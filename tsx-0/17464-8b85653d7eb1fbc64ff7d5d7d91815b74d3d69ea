{"code":"(()=>{\nvar __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var import_checkEnv=require(\"./checkEnv\");var import_common=require(\"@nestjs/common\");var import_child_process=require(\"child_process\");var import_core=require(\"@nestjs/core\");var import_config=require(\"@nestjs/config\");var import_listr2=require(\"listr2\");new import_listr2.Listr([{title:\"Check Environment\",task(ctx,renderer){return renderer.newListr((0,import_checkEnv.getEnvTasks)(),{rendererOptions:{collapseSubtasks:false,collapseErrors:false,collapseSkips:false,showErrorMessage:true,showSkipMessage:true,showSubtasks:true}}).run()}},{title:\"Build All Dependencies\",async task(ctx,renderer){const{CommonConfigModule}=require(\"cc.naily.six.shared\");class BuildModule{static{__name(this,\"BuildModule\")}}(0,import_common.Module)({imports:[CommonConfigModule.forRoot()]})(BuildModule);const app=await import_core.NestFactory.createApplicationContext(BuildModule);const configService=app.get(import_config.ConfigService);const commands=configService.getOrThrow(\"scripts.buildDeps.commands\");if(!(commands instanceof Array))throw new TypeError(\"scripts.buildDeps.commands must be an array\");if(commands.length===0)throw new Error(\"scripts.buildDeps.commands must not be empty\");return renderer.newListr(commands.map(command=>{return{title:command,task:(ctx2,renderer2)=>{return new Promise(resolve=>{renderer2.output=`Running ${command}`;const workerProcess=(0,import_child_process.exec)(command);workerProcess.stdout.on(\"data\",function(data){renderer2.output=data});workerProcess.stderr.on(\"data\",function(data){renderer2.output=data});workerProcess.on(\"close\",function(){renderer2.title=`${command} done`;resolve(true)})})}}}),{exitOnError:false,concurrent:true,collectErrors:\"minimal\",rendererOptions:{collapseSubtasks:false,collapseErrors:false,collapseSkips:false,showErrorMessage:true,showSkipMessage:true,showSubtasks:true}}).run()}}],{rendererOptions:{collapseSubtasks:false,collapseErrors:false,collapseSkips:false,showErrorMessage:true,showSkipMessage:true,showSubtasks:true},concurrent:false}).run().then();\n})()\n","warnings":[],"map":{"version":3,"mappings":";kHAiBA,oBAA4B,sBAC5B,kBAAuB,0BACvB,yBAAqB,yBACrB,gBAA4B,wBAC5B,kBAA8B,0BAC9B,kBAAsB,kBAEtB,IAAI,oBACF,CACE,CACE,MAAO,oBACP,KAAK,IAAK,SAAU,CAClB,OAAO,SACJ,YAAS,6BAAY,EAAG,CACvB,gBAAiB,CACf,iBAAkB,MAClB,eAAgB,MAChB,cAAe,MACf,iBAAkB,KAClB,gBAAiB,KACjB,aAAc,IAChB,CACF,CAAC,EACA,IAAI,CACT,CACF,EACA,CACE,MAAO,yBACP,MAAM,KAAK,IAAK,SAAU,CAExB,KAAM,CAAE,kBAAmB,EAAI,QAAQ,qBAAqB,EAE5D,MAAM,WAAY,CAjD1B,MAiD0B,4BAAC,IACnB,sBAAO,CACL,QAAS,CAAC,mBAAmB,QAAQ,CAAC,CACxC,CAAC,EAAE,WAAW,EACd,MAAM,IAAM,MAAM,wBAAY,yBAAyB,WAAW,EAClE,MAAM,cAAgB,IAAI,IAAI,2BAAa,EAC3C,MAAM,SAAqB,cAAc,WAAW,4BAA4B,EAChF,GAAI,EAAE,oBAAoB,OAAQ,MAAM,IAAI,UAAU,6CAA6C,EACnG,GAAI,SAAS,SAAW,EAAG,MAAM,IAAI,MAAM,8CAA8C,EACzF,OAAO,SACJ,SACC,SAAS,IAAK,SAAY,CACxB,MAAO,CACL,MAAO,QACP,KAAM,CAACA,KAAKC,YAAa,CACvB,OAAO,IAAI,QAAS,SAAY,CAC9BA,UAAS,OAAS,WAAW,OAAO,GACpC,MAAM,iBAAgB,2BAAK,OAAO,EAClC,cAAc,OAAO,GAAG,OAAQ,SAAU,KAAM,CAC9CA,UAAS,OAAS,IACpB,CAAC,EACD,cAAc,OAAO,GAAG,OAAQ,SAAU,KAAM,CAC9CA,UAAS,OAAS,IACpB,CAAC,EACD,cAAc,GAAG,QAAS,UAAY,CACpCA,UAAS,MAAQ,GAAG,OAAO,QAC3B,QAAQ,IAAI,CACd,CAAC,CACH,CAAC,CACH,CACF,CACF,CAAC,EACD,CACE,YAAa,MACb,WAAY,KACZ,cAAe,UACf,gBAAiB,CACf,iBAAkB,MAClB,eAAgB,MAChB,cAAe,MACf,iBAAkB,KAClB,gBAAiB,KACjB,aAAc,IAChB,CACF,CACF,EACC,IAAI,CACT,CACF,CACF,EACA,CACE,gBAAiB,CACf,iBAAkB,MAClB,eAAgB,MAChB,cAAe,MACf,iBAAkB,KAClB,gBAAiB,KACjB,aAAc,IAChB,EACA,WAAY,KACd,CACF,EACG,IAAI,EACJ,KAAK","names":["ctx","renderer"],"sources":["/www/wwwroot/Nai-Six/scripts/buildDeps.ts"],"sourcesContent":[null]}}